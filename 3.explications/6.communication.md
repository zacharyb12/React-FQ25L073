# communication entre composants

## Props 

- Pour communiquer entre composants en React, on utilise principalement les "props" (propriétés).
- Les props permettent de passer des données d'un composant parent à un composant enfant.

```jsx
function ParentComponent() {
  const message = "Bonjour depuis le composant parent!";
  return <ChildComponent greeting={message} />;
}

function ChildComponent({ greeting }) {
  return <h1>{greeting}</h1>;
}
export default ParentComponent;
```

- Ce qui permet de passer des données dynamiques aux composants enfants.
- L'enfant n'as pas besoin de connnaître la source des données, il les reçoit simplement via les props et execute une action ou affiche l'informations.

### Descendre une information vers un composant enfant

- Pour passer des données d'un composant parent à un composant enfant, on utilise les props comme montré dans l'exemple ci-dessus.
- l'enfant reçoit les données via les attributs du composant et peut les utiliser dans son rendu ou sa logique.

```jsx
function ChildComponent({ greeting }) {

  return <h1>{greeting}</h1>;

}

export default ParentComponent;
```

### Remonter une information vers un composant parent
- Pour remonter des informations d'un composant enfant vers un composant parent, on passe une fonction en prop du parent à l'enfant.
- on parle alors de callback.

```jsx
function ParentComponent() {

const updateValueParent = (data) => {
// ici on log juste l'information reçue de l'enfant
console.log( data);

};


return (
    <ChildComponent onSendData={updateValueParent} />
  );
}
```

```jsx
function ChildComponent({ actionFromParent }) {

// ici l'action est utilisée dans une fonction locale pour envoyer des données au parent
// mais on pourrait aussi l'utiliser directement la fonction passé en prop
const sendData = () => {
    actionFromParent("Bonjour depuis l'enfant !");
  };


  return (
    // ici l'enfant declenche l'action lors d'un clic de bouton
    <button onClick={sendData}>Envoyer des données</button>
  
  );
}
```

### Communication entre plusieurs composants ( frères )

- Pour communiquer entre plusieurs composants frères, on remonte l'information au parent commun, puis on la redescend vers le frère concerné.

- On parle alors de centralisé l'information dans le parent.

### Composant parent qui gere la logique
```jsx
function ParentComponent() {
  const [list, setList] = useState([]);

  const addToList = (data) => {
    setList((prevList) => [...prevList, data]);
  };

  return (
    <>
      <ChildComponent onSendData={addToList} />
      <SiblingComponent listParent={list} />
    </>
  );
}
```
### Composant input
```jsx
function SiblingComponent({ onSendData }) {
  return (
    <>
      <input type="text" placeholder="Nouvel élément" />
      <button onClick={onSendData}>
        Ajouter
      </button>
    </>
  )
}
```
### Composant affichage de la liste
```jsx
function ChildComponent({ listParent }) {

return (
    <>
    {listParent.map((item, index) => (
        <h2 key={index}>element {index} = {item}</h2>
      ))
    }
    </>
)
}
```

- Ainsi, le composant parent centralise la gestion de l'état et la logique de communication entre les composants frères.

